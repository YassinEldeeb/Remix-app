{
  "version": 3,
  "sources": ["<stdin>", "../node_modules/@remix-run/dev/compiler/shims/react.ts", "../app/entry.server.tsx", "C:\\development\\Web Development\\mahmoud-workos-mfa\\app\\root.tsx", "../app/components/layout/navbar.tsx", "../app/utils/isUser.ts", "../app/hooks/useMatchesData.ts", "../app/hooks/useOptionalUser.ts", "../app/auth/cookiesSessionStorage.ts", "../app/auth/getSession.ts", "../app/prisma-actions/user.server.ts", "../app/utils/prisma.server.ts", "../app/auth/constants.ts", "../app/auth/getUserId.ts", "../app/auth/logout.ts", "../app/auth/getUser.ts", "C:\\development\\Web Development\\mahmoud-workos-mfa\\app\\routes\\settings.two-factor-authentication.tsx", "../app/utils/workos.server.ts", "../app/components/settings/mfa/setup/activated.tsx", "../app/components/settings/mfa/setup/select-factor.tsx", "../app/components/shared/button.tsx", "../app/components/shared/spinner.tsx", "../app/components/shared/text-input.tsx", "../app/components/settings/mfa/setup/verify.tsx", "../app/components/mfa/form-switcher.tsx", "../app/components/mfa/verification-input.tsx", "../app/components/mfa/sms-form.tsx", "../app/components/mfa/totp-form.tsx", "C:\\development\\Web Development\\mahmoud-workos-mfa\\app\\routes\\forgot-password.tsx", "C:\\development\\Web Development\\mahmoud-workos-mfa\\app\\routes\\settings.tsx", "../app/components/settings/change-password.tsx", "../app/components/settings/delete-account.tsx", "../app/components/settings/mfa/factors.tsx", "C:\\development\\Web Development\\mahmoud-workos-mfa\\app\\routes\\logout.tsx", "C:\\development\\Web Development\\mahmoud-workos-mfa\\app\\routes\\signup.tsx", "../app/auth/createUserSession.ts", "../app/utils/validateEmail.ts", "../app/utils/redirectSafely.ts", "C:\\development\\Web Development\\mahmoud-workos-mfa\\app\\routes\\index.tsx", "C:\\development\\Web Development\\mahmoud-workos-mfa\\app\\routes\\login.tsx", "../app/components/login-form.tsx", "server-assets-manifest:@remix-run/dev/assets-manifest", "server-entry-module:@remix-run/dev/server-build"],
  "sourcesContent": ["export * from \"@remix-run/dev/server-build\";", "// eslint-disable-next-line import/no-extraneous-dependencies\nimport * as React from \"react\";\nexport { React };\n", "import type { EntryContext } from \"@remix-run/node\";\r\nimport { RemixServer } from \"@remix-run/react\";\r\nimport { renderToString } from \"react-dom/server\";\r\n\r\nexport default function handleRequest(\r\n  request: Request,\r\n  responseStatusCode: number,\r\n  responseHeaders: Headers,\r\n  remixContext: EntryContext\r\n) {\r\n  let markup = renderToString(\r\n    <RemixServer context={remixContext} url={request.url} />\r\n  );\r\n\r\n  responseHeaders.set(\"Content-Type\", \"text/html\");\r\n\r\n  return new Response(\"<!DOCTYPE html>\" + markup, {\r\n    status: responseStatusCode,\r\n    headers: responseHeaders,\r\n  });\r\n}\r\n", "import type {\r\n  LinksFunction,\r\n  LoaderFunction,\r\n  MetaFunction,\r\n} from '@remix-run/node';\r\nimport { json } from '@remix-run/node';\r\nimport {\r\n  Links,\r\n  LiveReload,\r\n  Meta,\r\n  Outlet,\r\n  Scripts,\r\n  ScrollRestoration,\r\n  useLoaderData,\r\n} from '@remix-run/react';\r\nimport toast, { Toaster } from 'react-hot-toast';\r\nimport { Navbar } from './components/layout/navbar';\r\nimport styles from './styles/app.css';\r\nimport { getSession } from '~/auth/getSession';\r\nimport { getUser } from '~/auth/getUser';\r\nimport type { ToastMessage } from './auth/displayToast';\r\nimport { useEffect } from 'react';\r\nimport { cookieSessionStorage } from './auth/cookiesSessionStorage';\r\n\r\nexport const links: LinksFunction = () => {\r\n  return [{ rel: 'stylesheet', href: styles }];\r\n};\r\n\r\nexport const meta: MetaFunction = () => ({\r\n  charset: 'utf-8',\r\n  title: 'WorkOS + Remix',\r\n  viewport: 'width=device-width,initial-scale=1',\r\n});\r\n\r\ntype LoaderData = {\r\n  user: Awaited<ReturnType<typeof getUser>>;\r\n  toastMessage?: ToastMessage | null;\r\n};\r\n\r\nexport const loader: LoaderFunction = async ({ request }) => {\r\n  const { session } = await getSession(request);\r\n  const user = await getUser(request);\r\n  const toastMessage = session.get('toastMessage') as ToastMessage;\r\n\r\n  if (!toastMessage) {\r\n    return json<LoaderData>({ toastMessage, user });\r\n  }\r\n\r\n  if (!toastMessage.type) {\r\n    throw new Error('Message should have a type');\r\n  }\r\n\r\n  return json<LoaderData>(\r\n    {\r\n      user,\r\n      toastMessage: toastMessage ? toastMessage : null,\r\n    },\r\n    {\r\n      headers: {\r\n        'Set-Cookie': await cookieSessionStorage.commitSession(session),\r\n      },\r\n    },\r\n  );\r\n};\r\n\r\nexport default function App() {\r\n  const { toastMessage } = useLoaderData<LoaderData>();\r\n\r\n  useEffect(() => {\r\n    if (!toastMessage) {\r\n      return;\r\n    }\r\n    const { message, type } = toastMessage;\r\n\r\n    switch (type) {\r\n      case 'success':\r\n        toast.success(message, {\r\n          duration: 4000,\r\n        });\r\n        break;\r\n      case 'error':\r\n        toast.error(message, { duration: 4000 });\r\n        break;\r\n    }\r\n  }, [toastMessage]);\r\n\r\n  return (\r\n    <html lang=\"en\">\r\n      <head>\r\n        <Meta />\r\n        <Links />\r\n      </head>\r\n      <body>\r\n        <div>\r\n          <Navbar />\r\n          <main className=\"p-6 max-w-2xl mx-auto\">\r\n            <Outlet />\r\n            <Toaster />\r\n          </main>\r\n        </div>\r\n        <ScrollRestoration />\r\n        <Scripts />\r\n        <LiveReload />\r\n      </body>\r\n    </html>\r\n  );\r\n}\r\n", "import { Fragment } from 'react';\r\nimport { Disclosure, Menu, Transition } from '@headlessui/react';\r\nimport { Form, Link } from '@remix-run/react';\r\nimport {\r\n  Cross2Icon,\r\n  HamburgerMenuIcon,\r\n  PersonIcon,\r\n} from '@radix-ui/react-icons';\r\nimport { useOptionalUser } from '~/hooks/useOptionalUser';\r\n\r\nfunction classNames(...classes: string[]) {\r\n  return classes.filter(Boolean).join(' ');\r\n}\r\n\r\nexport function Navbar() {\r\n  const user = useOptionalUser();\r\n  return (\r\n    <Disclosure as=\"nav\" className=\"bg-white shadow\">\r\n      {({ open }) => (\r\n        <>\r\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n            <div className=\"flex justify-between h-16\">\r\n              <div className=\"flex\">\r\n                <div className=\"-ml-2 mr-2 flex items-center md:hidden\">\r\n                  {/* Mobile menu button */}\r\n                  {user && (\r\n                    <Disclosure.Button className=\"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500\">\r\n                      <span className=\"sr-only\">Open main menu</span>\r\n                      {open ? (\r\n                        <Cross2Icon\r\n                          className=\"block h-6 w-6\"\r\n                          aria-hidden=\"true\"\r\n                        />\r\n                      ) : (\r\n                        <HamburgerMenuIcon\r\n                          className=\"block h-6 w-6\"\r\n                          aria-hidden=\"true\"\r\n                        />\r\n                      )}\r\n                    </Disclosure.Button>\r\n                  )}\r\n                </div>\r\n                <div className=\"flex-shrink-0  text-lg flex items-center\">\r\n                  <Link to=\"/\">WorkOS + Remix</Link>\r\n                </div>\r\n              </div>\r\n              {user && (\r\n                <div className=\"flex items-center\">\r\n                  <div className=\"hidden md:ml-4 md:flex-shrink-0 md:flex md:items-center\">\r\n                    {/* Profile dropdown */}\r\n                    <Menu as=\"div\" className=\"ml-3 relative\">\r\n                      <div>\r\n                        <Menu.Button className=\"bg-white rounded-full flex text-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\">\r\n                          <span className=\"sr-only\">Open user menu</span>\r\n                          <PersonIcon className=\"h-7 w-7 text-white bg-indigo-500 p-1.5 rounded-full\" />\r\n                        </Menu.Button>\r\n                      </div>\r\n                      <Transition\r\n                        as={Fragment}\r\n                        enter=\"transition ease-out duration-200\"\r\n                        enterFrom=\"transform opacity-0 scale-95\"\r\n                        enterTo=\"transform opacity-100 scale-100\"\r\n                        leave=\"transition ease-in duration-75\"\r\n                        leaveFrom=\"transform opacity-100 scale-100\"\r\n                        leaveTo=\"transform opacity-0 scale-95\"\r\n                      >\r\n                        <Menu.Items className=\"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg py-1 bg-white ring-1 ring-black ring-opacity-5 focus:outline-none\">\r\n                          <Menu.Item>\r\n                            <p className=\"block px-4 py-2 mb-3 text-xs text-gray-700 border-b-2 border-gray-200\">\r\n                              {user?.email}\r\n                            </p>\r\n                          </Menu.Item>\r\n                          <Menu.Item>\r\n                            {({ active }) => (\r\n                              <Link\r\n                                to=\"/settings\"\r\n                                className={classNames(\r\n                                  active ? 'bg-gray-100' : '',\r\n                                  'hover:bg-gray-100 block px-4 py-2 text-sm text-gray-700',\r\n                                )}\r\n                              >\r\n                                Settings\r\n                              </Link>\r\n                            )}\r\n                          </Menu.Item>\r\n                          <Menu.Item>\r\n                            {({ active }) => (\r\n                              <Form action=\"/logout\" method=\"post\">\r\n                                <button\r\n                                  type=\"submit\"\r\n                                  className=\"hover:bg-gray-100 w-full text-left block px-4 py-2 text-sm text-gray-700\"\r\n                                >\r\n                                  Logout\r\n                                </button>\r\n                              </Form>\r\n                            )}\r\n                          </Menu.Item>\r\n                        </Menu.Items>\r\n                      </Transition>\r\n                    </Menu>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n          {user && (\r\n            <Disclosure.Panel className=\"md:hidden\">\r\n              <div className=\"pt-4 pb-3 border-t border-gray-200\">\r\n                <div className=\"flex items-center px-4 sm:px-6\">\r\n                  <div className=\"flex-shrink-0\">\r\n                    <PersonIcon className=\"h-7 w-7 text-white  bg-indigo-500 p-1.5 rounded-full\" />\r\n                  </div>\r\n                  <div className=\"ml-3\">\r\n                    <div className=\"text-sm  text-gray-500\">{user?.email}</div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"mt-3 space-y-1\">\r\n                  <Disclosure.Button\r\n                    as=\"a\"\r\n                    href=\"/settings\"\r\n                    className=\"block px-4 py-2 text-base  text-gray-500 hover:text-gray-800 hover:bg-gray-100 sm:px-6\"\r\n                  >\r\n                    Settings\r\n                  </Disclosure.Button>\r\n                  <Disclosure.Button\r\n                    as=\"a\"\r\n                    href=\"/logout\"\r\n                    className=\"block px-4 py-2 text-base  text-gray-500 hover:text-gray-800 hover:bg-gray-100 sm:px-6\"\r\n                  >\r\n                    Log out\r\n                  </Disclosure.Button>\r\n                </div>\r\n              </div>\r\n            </Disclosure.Panel>\r\n          )}\r\n        </>\r\n      )}\r\n    </Disclosure>\r\n  );\r\n}\r\n", "import type { User } from '~/prisma-actions/user.server';\n\nexport const isUser = (user: User) => {\n  return user && typeof user === 'object' && typeof user.email === 'string';\n};\n", "import { useMatches } from '@remix-run/react';\nimport type { RouteData } from '@remix-run/react/routeData';\nimport { useMemo } from 'react';\n\n/**\n * This base hook is used in other hooks to quickly search for specific data\n * across all loader data using useMatches.\n * @param {string} id The route id\n * @returns {JSON|undefined} The router data or undefined if not found\n */\nexport function useMatchesData(id: string): RouteData | undefined {\n  const matchingRoutes = useMatches();\n  const route = useMemo(\n    () => matchingRoutes.find((route) => route.id === id),\n    [matchingRoutes, id],\n  );\n  return route?.data;\n}\n", "import type { User } from '~/prisma-actions/user.server';\nimport { isUser } from '~/utils/isUser';\nimport { useMatchesData } from './useMatchesData';\n\nexport const useOptionalUser = (): User | undefined => {\n  const data = useMatchesData('root');\n  if (!data || !isUser(data.user)) {\n    return;\n  }\n  return data.user;\n};\n", "import { createCookieSessionStorage } from '@remix-run/node';\nimport invariant from 'tiny-invariant';\n\ninvariant(process.env.SESSION_SECRET, 'SESSION_SECRET must be set');\n\nexport const cookieSessionStorage = createCookieSessionStorage({\n  cookie: {\n    name: '__session',\n    httpOnly: true,\n    path: '/',\n    sameSite: 'lax',\n    secrets: [process.env.SESSION_SECRET],\n    secure: process.env.NODE_ENV === 'production',\n  },\n});\n", "import { cookieSessionStorage } from './cookiesSessionStorage';\n\nexport async function getSession(request: Request) {\n  const cookie = request.headers.get('Cookie');\n\n  const session = await cookieSessionStorage.getSession(cookie);\n  return {\n    session,\n  };\n}\n", "import type { Password, User } from '@prisma/client';\nimport bcrypt from 'bcryptjs';\nimport { prisma } from '~/utils/prisma.server';\nexport type { User } from '@prisma/client';\n\nexport async function getUserById(userId: User['id']) {\n  return prisma.user.findUnique({ where: { id: userId } });\n}\n\nexport async function getUserByEmail(email: User['email']) {\n  return await prisma.user.findUnique({ where: { email } });\n}\n\nexport async function getUserAuthFactors(userId: User['id']) {\n  return await prisma.user.findUnique({\n    where: { id: userId },\n    select: {\n      smsFactorId: true,\n      totpFactorId: true,\n    },\n  });\n}\n\nexport async function deleteUser(userId: User['id']) {\n  return await prisma.user.delete({\n    where: { id: userId },\n  });\n}\n\nexport async function enrollTotp(\n  userId: User['id'],\n  totpFactorId: User['totpFactorId'],\n) {\n  return await prisma.user.update({\n    where: {\n      id: userId,\n    },\n    data: {\n      totpFactorId,\n    },\n  });\n}\n\nexport async function enrollSMS(\n  userId: User['id'],\n  smsFactorId: User['smsFactorId'],\n) {\n  return await prisma.user.update({\n    where: {\n      id: userId,\n    },\n    data: {\n      smsFactorId,\n    },\n  });\n}\n\nexport async function disable2FA(userId: User['id']) {\n  return await prisma.user.update({\n    where: {\n      id: userId,\n    },\n    data: {\n      smsFactorId: null,\n      totpFactorId: null,\n    },\n  });\n}\n\nexport async function updatePassword(\n  userId: User['id'],\n  currentPassword: string,\n  newPassword: string,\n) {\n  const userWithPassword = await prisma.user.findUnique({\n    where: {\n      id: userId,\n    },\n    include: {\n      password: true,\n    },\n  });\n\n  if (!userWithPassword || !userWithPassword.password) {\n    return null;\n  }\n\n  const isValid = await bcrypt.compare(\n    currentPassword,\n    userWithPassword.password.hash,\n  );\n\n  if (!isValid) {\n    return null;\n  }\n\n  const hashedPassword = await bcrypt.hash(newPassword, 10);\n\n  return await prisma.user.update({\n    where: {\n      id: userId,\n    },\n    data: {\n      password: {\n        update: {\n          hash: hashedPassword,\n        },\n      },\n    },\n  });\n}\n\nexport async function createUser(email: User['email'], password: string) {\n  const hashedPassword = await bcrypt.hash(password, 10);\n\n  return await prisma.user.create({\n    data: {\n      email,\n      password: {\n        create: {\n          hash: hashedPassword,\n        },\n      },\n    },\n  });\n}\n\nexport async function verifyLogin(\n  email: User['email'],\n  password: Password['hash'],\n) {\n  const userWithPassword = await prisma.user.findUnique({\n    where: { email },\n    include: {\n      password: true,\n    },\n  });\n\n  if (!userWithPassword || !userWithPassword.password) {\n    return null;\n  }\n\n  const isValid = await bcrypt.compare(\n    password,\n    userWithPassword.password.hash,\n  );\n\n  if (!isValid) {\n    return null;\n  }\n\n  const { password: _password, ...userWithoutPassword } = userWithPassword;\n\n  return userWithoutPassword;\n}\n", "import { PrismaClient } from '@prisma/client';\r\n\r\nlet prisma: PrismaClient;\r\n\r\ndeclare global {\r\n  var __db__: PrismaClient;\r\n}\r\n\r\n// this is needed because in development we don't want to restart\r\n// the server with every change, but we want to make sure we don't\r\n// create a new connection to the DB with every change either.\r\n// in production we'll have a single connection to the DB.\r\nif (process.env.NODE_ENV === 'production') {\r\n  prisma = new PrismaClient();\r\n} else {\r\n  if (!global.__db__) {\r\n    global.__db__ = new PrismaClient();\r\n  }\r\n  prisma = global.__db__;\r\n  prisma.$connect();\r\n}\r\n\r\nexport { prisma };\r\n", "export const USER_SESSION_KEY = 'userId';\n", "import { USER_SESSION_KEY } from './constants';\nimport { getSession } from './getSession';\n\nexport async function getUserId(request: Request): Promise<string | undefined> {\n  const { session } = await getSession(request);\n  const userId = session.get(USER_SESSION_KEY);\n  return userId;\n}\n", "import { redirect } from '@remix-run/node';\nimport { cookieSessionStorage } from './cookiesSessionStorage';\nimport { getSession } from './getSession';\n\nexport async function logout(request: Request) {\n  const { session } = await getSession(request);\n  return redirect('/', {\n    headers: {\n      'Set-Cookie': await cookieSessionStorage.destroySession(session),\n    },\n  });\n}\n", "import { getUserById } from '~/prisma-actions/user.server';\nimport { getUserId } from './getUserId';\nimport type { User } from '~/prisma-actions/user.server';\nimport { logout } from './logout';\n\nexport async function getUser(request: Request): Promise<null | User> {\n  const userId = await getUserId(request);\n  if (userId === undefined) return null;\n\n  const user = await getUserById(userId);\n\n  if (user) return user;\n\n  throw await logout(request);\n}\n", "import { json, redirect } from '@remix-run/node';\r\nimport type { ActionFunction, LoaderFunction } from '@remix-run/node';\r\nimport { enrollSMS, enrollTotp } from '~/prisma-actions/user.server';\r\nimport {\r\n  cookieSessionStorage,\r\n  displayToast,\r\n  getSession,\r\n  requireUser,\r\n  requireUserId,\r\n} from '~/utils/session.server';\r\nimport { workos } from '~/utils/workos.server';\r\nimport {\r\n  SelectFactor,\r\n  Verify,\r\n  Activated,\r\n} from '~/components/settings/mfa/setup';\r\n\r\nexport const loader: LoaderFunction = async ({ request }) => {\r\n  return await requireUserId(request);\r\n};\r\n\r\nexport const action: ActionFunction = async ({ request }) => {\r\n  const user = await requireUser(request);\r\n  const { session } = await getSession(request);\r\n  let formData = await request.formData();\r\n  let { _action, ...values } = Object.fromEntries(formData);\r\n\r\n  switch (_action) {\r\n    case 'selectFactor':\r\n      if (!values.authFactorType) {\r\n        return json(\r\n          { errors: { message: 'This field is required' } },\r\n          { status: 400 },\r\n        );\r\n      }\r\n      if (values.authFactorType === 'totp') {\r\n        try {\r\n          const totpFactor = await workos.mfa.enrollFactor({\r\n            type: 'totp',\r\n            issuer: user.email,\r\n            user: user.email,\r\n          });\r\n\r\n          const totpChallenge = await workos.mfa.challengeFactor({\r\n            authenticationFactorId: totpFactor.id,\r\n          });\r\n\r\n          return { totpFactor, totpChallenge, step: 1 };\r\n        } catch (error) {\r\n          return json({ errors: { message: error } }, { status: 400 });\r\n        }\r\n      }\r\n\r\n      if (values.authFactorType === 'sms') {\r\n        setTimeout(() => {}, 3000);\r\n        return { smsFactor: true, step: 1 };\r\n      }\r\n\r\n    case 'phoneNumber':\r\n      if (!values.phoneNumber) {\r\n        return json(\r\n          { errors: { message: 'You need to provide a phone number' } },\r\n          { status: 400 },\r\n        );\r\n      }\r\n\r\n      try {\r\n        const smsFactor = await workos.mfa.enrollFactor({\r\n          type: 'sms',\r\n          phoneNumber: `${values.phoneNumber}`,\r\n        });\r\n\r\n        const smsChallenge = await workos.mfa.challengeFactor({\r\n          authenticationFactorId: smsFactor.id,\r\n        });\r\n\r\n        return { smsFactor, smsChallenge, step: 1 };\r\n      } catch (error) {\r\n        displayToast(\r\n          session,\r\n          `Something went wrong, please try again`,\r\n          'success',\r\n        );\r\n        return null;\r\n      }\r\n\r\n    case 'verify':\r\n      const {\r\n        authenticationCode,\r\n        authenticationChallengeId,\r\n        isSMSVerification,\r\n      } = values;\r\n\r\n      if (authenticationCode.toString().length !== 6) {\r\n        return json(\r\n          { errors: { title: 'Code must be 6 digits' } },\r\n          { status: 400 },\r\n        );\r\n      }\r\n\r\n      try {\r\n        const response = await workos.mfa.verifyFactor({\r\n          authenticationChallengeId: `${authenticationChallengeId}`,\r\n          code: `${authenticationCode}`,\r\n        });\r\n\r\n        if (response.valid) {\r\n          if (isSMSVerification === 'true') {\r\n            await enrollSMS(\r\n              user.id,\r\n              response.challenge.authentication_factor_id,\r\n            );\r\n          } else {\r\n            await enrollTotp(\r\n              user.id,\r\n              response.challenge.authentication_factor_id,\r\n            );\r\n          }\r\n        }\r\n        return { response, step: 2 };\r\n      } catch (error) {\r\n        return json({ errors: { message: error } }, { status: 400 });\r\n      }\r\n  }\r\n  return null;\r\n};\r\n\r\nconst MultiFactorAuthentication = () => {\r\n  return (\r\n    <section className=\"my-10\">\r\n      <h1 className=\"text-2xl font\">Set up two-factor authentication (2FA)</h1>\r\n      <ol className=\"my-8 relative border-l-2 border-gray-200\">\r\n        <SelectFactor />\r\n        <Verify />\r\n        <Activated />\r\n      </ol>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default MultiFactorAuthentication;\r\n", "import WorkOS from '@workos-inc/node';\r\n\r\nexport const workos = new WorkOS(process.env.WORKOS_API_KEY);\r\n", "import { CheckIcon } from '@radix-ui/react-icons';\r\nimport { useActionData } from '@remix-run/react';\r\n\r\nexport const Activated = () => {\r\n  const actionData = useActionData();\r\n\r\n  return (\r\n    <div className=\"flex\">\r\n      {actionData?.step === 2 && (\r\n        <div className=\"border-l-2 border-white  h-28 absolute -left-0.5 -bottom-3 z-10\"></div>\r\n      )}\r\n      <li\r\n        className={`ml-6 ${\r\n          actionData?.step === 2\r\n            ? 'p-5 border-2 border-green-100 rounded-md bg-green-50'\r\n            : ''\r\n        }`}\r\n      >\r\n        {actionData?.step === 2 ? (\r\n          <>\r\n            <div className=\"flex items-center\">\r\n              <span className=\"flex absolute bg-indigo-500 -left-4 justify-center items-center w-7 h-7 rounded-full\">\r\n                <CheckIcon className=\"w-4 h-4 text-white\" />\r\n              </span>\r\n              <h2 className=\"text-lg \">Two-factor authentication activated</h2>\r\n            </div>\r\n            <p className=\"mb-5 mt-3 text-base\">\r\n              You have successfully added a second authentication factor for\r\n              your account. You'll be prompted to use it the next time you log\r\n              in\r\n            </p>\r\n          </>\r\n        ) : (\r\n          <div className=\"flex\">\r\n            <div className=\"border-l-2 border-white h-6 absolute -left-0.5 -bottom-3\"></div>\r\n            <div className=\"text-lg  flex items-center mb-3\">\r\n              <span className=\"flex absolute bg-indigo-500 -left-4 justify-center items-center w-7 h-7 rounded-full text-white  \">\r\n                3\r\n              </span>\r\n              <h2>Two-factor authentication activated</h2>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </li>\r\n    </div>\r\n  );\r\n};\r\n", "import * as RadioGroup from '@radix-ui/react-radio-group';\r\nimport { Form, useActionData, useTransition } from '@remix-run/react';\r\nimport { ChatBubbleIcon, CheckIcon, MobileIcon } from '@radix-ui/react-icons';\r\nimport { Button } from '~/components/shared';\r\n\r\nexport const SelectFactor = () => {\r\n  const actionData = useActionData();\r\n  const transition = useTransition();\r\n\r\n  return (\r\n    <div>\r\n      <li\r\n        className={` ml-6 ${\r\n          !actionData?.step ? 'p-5 border-2 border-gray-200 rounded-md' : ''\r\n        }`}\r\n      >\r\n        {actionData?.step >= 1 ? (\r\n          <div className=\"text-lg  flex items-center\">\r\n            <span className=\"flex absolute bg-indigo-500 -left-4 justify-center items-center w-7 h-7 rounded-full\">\r\n              <CheckIcon className=\"w-4 h-4 text-white\" />\r\n            </span>\r\n            <h2>Choose an authentication factor</h2>\r\n          </div>\r\n        ) : (\r\n          <>\r\n            <div className=\"text-lg  flex items-center\">\r\n              <span className=\"flex absolute top-0 -left-4 justify-center items-center w-5 p-3.5 h-5 bg-indigo-500  rounded-full ring-8 ring-white text-base  text-white\">\r\n                1\r\n              </span>\r\n              <h2>Choose an authentication factor</h2>\r\n            </div>\r\n            <p className=\"mb-5 mt-3\">\r\n              Two-factor authentication (2FA) is an extra layer of security used\r\n              when logging into websites or apps.\r\n            </p>\r\n            <Form method=\"post\" className=\"mt-3 space-y-3 mb-4\">\r\n              <RadioGroup.Root\r\n                name=\"authFactorType\"\r\n                defaultValue=\"totp\"\r\n                aria-label=\"Select authentication factor type\"\r\n              >\r\n                <div className=\"flex space-x-3 items-start mb-5\">\r\n                  <div>\r\n                    <RadioGroup.Item\r\n                      className=\"block h-4 w-4 mt-2.5 bg-gray-200 rounded-full shadow-sm focus:outline-none focus:ring-0 focus:ring-offset-0 focus-visible:ring focus-visible:ring-indigo-500 focus-visible:ring-opacity-75 focus-visible:ring-offset-2 checked:bg-red-500\"\r\n                      value=\"totp\"\r\n                      id=\"totp\"\r\n                    >\r\n                      <RadioGroup.Indicator className=\"relative flex items-center justify-center\">\r\n                        <div className=\"bg-indigo-600 w-2 h-2 rounded-full\"></div>\r\n                      </RadioGroup.Indicator>\r\n                    </RadioGroup.Item>\r\n                  </div>\r\n                  <label htmlFor=\"totp\">\r\n                    <div className=\"flex items-center space-x-2 mb-2\">\r\n                      <div className=\"bg-indigo-500 rounded-full p-2\">\r\n                        <MobileIcon className=\"w-5 h-5 text-white\" />\r\n                      </div>\r\n                      <p className=\"text-lg\">Set up using an app</p>\r\n                    </div>\r\n                    <p>\r\n                      Use an application on your phone to get an authentication\r\n                      code when prompted. We recommend using cloud-based TOTP\r\n                      apps such as:{' '}\r\n                      <a\r\n                        className=\"text-indigo-600 hover:underline\"\r\n                        href=\"https://1passwword.com\"\r\n                      >\r\n                        1Password\r\n                      </a>{' '}\r\n                      ,{' '}\r\n                      <a\r\n                        className=\"text-indigo-600 hover:underline\"\r\n                        href=\"https://authy.com/\"\r\n                      >\r\n                        Authy\r\n                      </a>\r\n                      ,{' '}\r\n                      <a\r\n                        className=\"text-indigo-600 hover:underline\"\r\n                        href=\"https://www.lastpass.com/\"\r\n                      >\r\n                        LastPass\r\n                      </a>\r\n                      , or{' '}\r\n                      <a\r\n                        className=\"text-indigo-600 hover:underline\"\r\n                        href=\"https://www.microsoft.com/en-us/security/mobile-authenticator-app\"\r\n                      >\r\n                        Microsoft Authenticator.\r\n                      </a>\r\n                    </p>\r\n                  </label>\r\n                </div>\r\n                <div className=\"flex space-x-3 items-start\">\r\n                  <RadioGroup.Item\r\n                    className=\"h-4 w-4 mt-2.5 bg-gray-200 rounded-full shadow-sm focus:outline-none focus:ring-0 focus:ring-offset-0 focus-visible:ring focus-visible:ring-indigo-500 focus-visible:ring-opacity-75 focus-visible:ring-offset-2 checked:bg-red-500\"\r\n                    value=\"sms\"\r\n                    id=\"sms\"\r\n                  >\r\n                    <RadioGroup.Indicator className=\"relative flex items-center justify-center \">\r\n                      <div className=\"bg-indigo-600 w-2 h-2 rounded-full\"></div>\r\n                    </RadioGroup.Indicator>\r\n                  </RadioGroup.Item>\r\n                  <label htmlFor=\"sms\">\r\n                    <div className=\"flex items-center space-x-2 mb-2\">\r\n                      <div className=\"bg-indigo-500 rounded-full p-2\">\r\n                        <ChatBubbleIcon className=\"w-5 h-5 text-white\" />\r\n                      </div>\r\n                      <p className=\"text-lg\">Set up using SMS</p>\r\n                    </div>\r\n                    <p>\r\n                      We will send you an SMS with an authentication code when\r\n                      prompted.\r\n                    </p>\r\n                  </label>\r\n                </div>\r\n              </RadioGroup.Root>\r\n              <p className=\"text-red-500\">{actionData?.errors?.message}</p>\r\n              <Button\r\n                isLoading={\r\n                  transition.state === 'submitting' &&\r\n                  transition.submission.formData.get('_action') ===\r\n                    'selectFactor'\r\n                }\r\n                name=\"_action\"\r\n                value=\"selectFactor\"\r\n                type=\"submit\"\r\n              >\r\n                Continue\r\n              </Button>\r\n            </Form>\r\n          </>\r\n        )}\r\n      </li>\r\n    </div>\r\n  );\r\n};\r\n", "import type { ButtonHTMLAttributes } from 'react';\r\nimport classnames from 'classnames';\r\nimport { Spinner } from './spinner';\r\n\r\nexport interface ButtonProps extends ButtonHTMLAttributes<HTMLButtonElement> {\r\n  isLoading?: boolean;\r\n  size?: ButtonSize;\r\n  appearance?: ButtonAppearance;\r\n}\r\n\r\nexport type ButtonSize = 'small' | 'medium' | 'large';\r\nexport type ButtonAppearance = 'primary' | 'secondary' | 'danger' | 'muted';\r\n\r\nexport const Button = ({\r\n  children,\r\n  isLoading,\r\n  size = 'medium',\r\n  appearance = 'primary',\r\n  className,\r\n  ...props\r\n}: ButtonProps) => {\r\n  const computeStyles = (appearance: ButtonAppearance) => {\r\n    switch (appearance) {\r\n      case 'primary':\r\n        return 'text-white bg-indigo-600 hover:bg-indigo-700';\r\n      case 'secondary':\r\n        return 'text-indigo-700 bg-indigo-100 hover:bg-indigo-200';\r\n      case 'danger':\r\n        return 'text-white bg-red-600 hover:bg-red-700 focus:ring-red-500';\r\n      case 'muted':\r\n        return 'text-indigo-700 bg-white border-gray-200 hover:bg-gray-50';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <button\r\n      {...props}\r\n      className={classnames(\r\n        computeStyles(appearance),\r\n        size === 'small' && 'px-3 py-2 text-sm',\r\n        size === 'medium' && 'px-4 py-2 text-sm ',\r\n        size === 'large' && 'px-4 py-2 text-base',\r\n        className,\r\n        'inline-flex items-center border border-transparent shadow-sm leading-4 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500'\r\n      )}\r\n    >\r\n      {children}\r\n      {isLoading && <Spinner />}\r\n    </button>\r\n  );\r\n};\r\n", "interface LoaderProps {\r\n  width?: number;\r\n  height?: number;\r\n}\r\nexport const Spinner = ({ width = 4, height = 4 }: LoaderProps) => {\r\n  return (\r\n    <svg\r\n      role=\"status\"\r\n      className={`ml-2 w-${width} h-${height} text-gray-200 animate-spin fill-indigo-600`}\r\n      viewBox=\"0 0 100 101\"\r\n      fill=\"none\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n    >\r\n      <path\r\n        d=\"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z\"\r\n        fill=\"currentColor\"\r\n      />\r\n      <path\r\n        d=\"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z\"\r\n        fill=\"currentFill\"\r\n      />\r\n    </svg>\r\n  );\r\n};\r\n", "import type { InputHTMLAttributes } from 'react';\r\nimport classnames from 'classnames';\r\n\r\ninterface TextInputProps extends InputHTMLAttributes<HTMLInputElement> {\r\n  type?: 'text' | 'email' | 'password' | 'hidden' | 'number';\r\n  className?: string;\r\n  id: string;\r\n  name: string;\r\n  placeholder?: string;\r\n  value?: string;\r\n  autoComplete?: string;\r\n}\r\n\r\nexport const TextInput = ({\r\n  type = 'text',\r\n  id,\r\n  name,\r\n  className,\r\n  placeholder,\r\n  value,\r\n  autoComplete = 'on',\r\n  ...props\r\n}: TextInputProps) => {\r\n  // TODO: form validation\r\n  return (\r\n    <input\r\n      autoComplete={autoComplete}\r\n      className={classnames(\r\n        className,\r\n        'shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md'\r\n      )}\r\n      placeholder={placeholder}\r\n      id={id}\r\n      name={name}\r\n      type={type}\r\n      value={value}\r\n      {...props}\r\n    />\r\n  );\r\n};\r\n", "import { CheckIcon } from '@radix-ui/react-icons';\r\nimport { Form, useActionData, useTransition } from '@remix-run/react';\r\nimport * as DialogPrimitive from '@radix-ui/react-dialog';\r\nimport { Button } from '~/components/shared';\r\nimport { VerificationInput } from '~/components/mfa';\r\n\r\ninterface DialogProps {\r\n  message: string;\r\n}\r\nconst Dialog = ({ message }: DialogProps) => {\r\n  return (\r\n    <DialogPrimitive.Root>\r\n      <DialogPrimitive.Trigger className=\"text-indigo-600\">\r\n        this secret\r\n      </DialogPrimitive.Trigger>\r\n      <DialogPrimitive.Overlay className=\"fixed inset-0 z-20 bg-black/50\" />\r\n      <DialogPrimitive.Content\r\n        className={\r\n          'fixed z-50 w-[95vw] max-w-md rounded-lg p-4 md:w-full top-[50%] left-[50%] -translate-x-[50%] -translate-y-[50%] bg-white '\r\n        }\r\n      >\r\n        <DialogPrimitive.Title className=\"text-sm font-medium text-gray-900 border-b-2 border-gray-200\">\r\n          Your two-factor secret\r\n        </DialogPrimitive.Title>\r\n        <DialogPrimitive.Description className=\"mt-2 text-sm font-normal text-gray-700\">\r\n          {message}\r\n        </DialogPrimitive.Description>\r\n      </DialogPrimitive.Content>\r\n    </DialogPrimitive.Root>\r\n  );\r\n};\r\n\r\nconst EnrollTotp = ({ actionData, transition }) => {\r\n  return (\r\n    <>\r\n      <div className=\"text-lg  flex items-center mb-3\">\r\n        <span className=\"flex absolute -left-4 justify-center items-center w-5 p-3.5 h-5 bg-indigo-500  rounded-full ring-8 ring-white text-base  text-white\">\r\n          2\r\n        </span>\r\n        <h2> Authentication verification</h2>\r\n      </div>\r\n      <p>\r\n        Scan the image below with the Multi-factor authentication app on your\r\n        phone. If you can't use a QR code, you can enter this text code instead\r\n      </p>\r\n      <div className=\"rounded-lg shadow-lg bg-white my-5 w-52 h-52 p-5\">\r\n        <img\r\n          src={actionData?.totpFactor?.totp.qr_code}\r\n          alt=\"QR code\"\r\n          className=\"w-52\"\r\n        />\r\n      </div>\r\n      <p>\r\n        After scanning the QR code image, the app will display a code that you\r\n        can enter below.If you can't use scan the QR code,use{' '}\r\n        <Dialog message={`${actionData?.totpFactor?.totp.secret}`} /> instead\r\n      </p>\r\n      <Form method=\"post\">\r\n        <div className=\"mt-5 mb-10\">\r\n          <VerificationInput />\r\n        </div>\r\n        <input\r\n          type=\"hidden\"\r\n          name=\"authenticationChallengeId\"\r\n          value={actionData?.totpChallenge?.id}\r\n        />\r\n        <Button\r\n          type=\"submit\"\r\n          name=\"_action\"\r\n          value=\"verify\"\r\n          isLoading={\r\n            transition.state === 'submitting' &&\r\n            transition.submission.formData.get('_action') === 'verify'\r\n          }\r\n        >\r\n          Verify\r\n        </Button>\r\n      </Form>\r\n    </>\r\n  );\r\n};\r\n\r\nconst EnrollSMS = ({ actionData, transition }) => {\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      <div className=\"text-lg  flex items-center mb-3\">\r\n        <span className=\"flex absolute -left-4 justify-center items-center w-5 p-3.5 h-5 bg-indigo-500  rounded-full ring-8 ring-white text-base  text-white\">\r\n          2\r\n        </span>\r\n        <h2> Authentication verification</h2>\r\n      </div>\r\n      <p>\r\n        We will send authentication codes to your mobile phone during sign in.\r\n      </p>\r\n\r\n      <Form method=\"post\">\r\n        <fieldset>\r\n          <label htmlFor=\"phoneNumber\" className=\"text-sm  text-gray-700\">\r\n            Phone number\r\n          </label>\r\n          <input\r\n            id=\"phoneNumber\"\r\n            type=\"text\"\r\n            name=\"phoneNumber\"\r\n            placeholder=\"(+20)1005321184\"\r\n            className=\"focus:outline-none focus-visible:ring focus-visible:ring-indigo-500 focus-visible:ring-opacity-75 border border-gray-400 focus-visible:border-transparent mt-1 block max-w-sm rounded-md text-sm text-gray-700 placeholder:text-gray-500 p-1 my-3\"\r\n          />\r\n        </fieldset>\r\n\r\n        <Button\r\n          name=\"_action\"\r\n          value=\"phoneNumber\"\r\n          type=\"submit\"\r\n          isLoading={\r\n            transition.state === 'submitting' &&\r\n            transition.submission.formData.get('_action') === 'phoneNumber'\r\n          }\r\n        >\r\n          Send authentication code\r\n        </Button>\r\n      </Form>\r\n\r\n      <Form method=\"post\">\r\n        <div className=\"mt-5 mb-10\">\r\n          <VerificationInput />\r\n        </div>\r\n        <input\r\n          type=\"hidden\"\r\n          name=\"authenticationChallengeId\"\r\n          value={actionData?.smsChallenge?.id}\r\n        />\r\n        <input type=\"hidden\" name=\"isSMSVerification\" value={'true'} />\r\n        <Button\r\n          name=\"_action\"\r\n          value=\"verify\"\r\n          type=\"submit\"\r\n          isLoading={\r\n            transition.state === 'submitting' &&\r\n            transition.submission.formData.get('_action') === 'verify'\r\n          }\r\n        >\r\n          Verify\r\n        </Button>\r\n      </Form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const Verify = () => {\r\n  const actionData = useActionData();\r\n  const transition = useTransition();\r\n  return (\r\n    <div>\r\n      <li\r\n        className={`ml-6 my-5 ${\r\n          actionData?.step === 1\r\n            ? 'p-5 border-2 border-gray-200 rounded-md'\r\n            : ''\r\n        }`}\r\n      >\r\n        {actionData?.step === 1 ? (\r\n          <>\r\n            {actionData?.totpFactor && (\r\n              <EnrollTotp actionData={actionData} transition={transition} />\r\n            )}\r\n            {actionData?.smsFactor && (\r\n              <EnrollSMS actionData={actionData} transition={transition} />\r\n            )}\r\n          </>\r\n        ) : (\r\n          <div className=\"text-lg  flex items-center mb-3\">\r\n            {actionData?.step > 1 ? (\r\n              <span className=\"flex absolute bg-indigo-500 -left-4 justify-center items-center w-7 h-7 rounded-full\">\r\n                <CheckIcon className=\"w-4 h-4 text-white\" />\r\n              </span>\r\n            ) : (\r\n              <span className=\"flex absolute  -left-4 justify-center items-center w-5 p-3.5 h-5 bg-indigo-500  rounded-full ring-8 ring-white text-base  text-white\">\r\n                2\r\n              </span>\r\n            )}\r\n            <h2>Authentication verification</h2>\r\n          </div>\r\n        )}\r\n      </li>\r\n    </div>\r\n  );\r\n};\r\n", "import { Form, useActionData, useTransition } from '@remix-run/react';\r\nimport { useState } from 'react';\r\nimport { VerificationInput } from './verification-input';\r\nimport { Button } from '../shared';\r\n\r\nexport const FormSwitcher = () => {\r\n  const [activeForm, setActiveForm] = useState(0);\r\n  const actionData = useActionData();\r\n  const transition = useTransition();\r\n\r\n  return (\r\n    <div>\r\n      <h2 className=\"text-2xl  mb-5\">Second Factor authentication</h2>\r\n      <>\r\n        {activeForm === 0 && (\r\n          <Form method=\"post\">\r\n            <h3 className=\"text-xl mb-3 \">Authenticator app</h3>\r\n            <p>Use the code that is generated by your authenticator app</p>\r\n            <div className=\"mt-5 mb-10\">\r\n              <VerificationInput />\r\n            </div>\r\n            <input\r\n              type=\"hidden\"\r\n              name=\"authenticationChallengeId\"\r\n              value={actionData?.totpChallengeId}\r\n            />\r\n            <input type=\"hidden\" name=\"userId\" value={actionData?.userId} />\r\n            {actionData?.errors?.authCode && (\r\n              <div className=\"pt-1 my-4 text-red-700\" id=\"password-error\">\r\n                {actionData.errors.authCode}\r\n              </div>\r\n            )}\r\n            <Button\r\n              name=\"_action\"\r\n              value=\"verify\"\r\n              isLoading={\r\n                transition.state === 'submitting' &&\r\n                transition.submission.formData.get('_action') === 'verify'\r\n              }\r\n              type=\"submit\"\r\n            >\r\n              Verify\r\n            </Button>\r\n            <button\r\n              className=\"block text-gray-700  my-5 underline\"\r\n              onClick={() => setActiveForm(1)}\r\n            >\r\n              Use SMS\r\n            </button>\r\n          </Form>\r\n        )}\r\n      </>\r\n      <>\r\n        {activeForm === 1 && (\r\n          <div>\r\n            <h3 className=\"text-xl mb-3 \">SMS verification code</h3>\r\n            <p className=\"mb-3\">\r\n              Use the code that is sent to your registered phone number\r\n            </p>{' '}\r\n            <Form method=\"post\">\r\n              <input\r\n                type=\"hidden\"\r\n                name=\"smsFactorId\"\r\n                value={actionData?.smsFactorId}\r\n              />\r\n              <Button\r\n                name=\"_action\"\r\n                value=\"SMS\"\r\n                type=\"submit\"\r\n                isLoading={\r\n                  transition.state === 'submitting' &&\r\n                  transition.submission.formData.get('_action') === 'SMS'\r\n                }\r\n              >\r\n                Send authentication code\r\n              </Button>\r\n            </Form>\r\n            <Form method=\"post\">\r\n              <div className=\"mt-5 mb-10\">\r\n                <VerificationInput />\r\n              </div>\r\n              <input type=\"hidden\" name=\"userId\" value={actionData?.userId} />\r\n              <input\r\n                type=\"hidden\"\r\n                name=\"authenticationChallengeId\"\r\n                value={actionData?.smsChallengeId}\r\n              />\r\n              <Button\r\n                name=\"_action\"\r\n                value=\"verify\"\r\n                type=\"submit\"\r\n                isLoading={\r\n                  transition.state === 'submitting' &&\r\n                  transition.submission.formData.get('_action') === 'verify'\r\n                }\r\n              >\r\n                Verify\r\n              </Button>\r\n              <button\r\n                className=\"block text-gray-700  my-5 underline\"\r\n                onClick={() => setActiveForm(0)}\r\n              >\r\n                Use authenticator app\r\n              </button>\r\n            </Form>\r\n          </div>\r\n        )}\r\n      </>\r\n    </div>\r\n  );\r\n};\r\n", "import { useSubmit } from '@remix-run/react';\r\nimport { useState } from 'react';\r\nimport Input from 'react-verification-input';\r\n\r\nexport const VerificationInput = () => {\r\n  const submit = useSubmit();\r\n  const [inputLength, setInputLength] = useState(0);\r\n  const [code, setCode] = useState('');\r\n\r\n  const handleChange = (value: string) => {\r\n    setCode(value);\r\n    setInputLength(value.length);\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-xs\">\r\n      <label\r\n        htmlFor=\"authenticationCode\"\r\n        className=\"block text-sm  text-gray-700 mb-5\"\r\n      >\r\n        Passcode\r\n      </label>\r\n      <Input\r\n        onChange={(value) => handleChange(value)}\r\n        autoFocus\r\n        value={code}\r\n        placeholder=\" \"\r\n        removeDefaultStyles\r\n        classNames={{\r\n          container: 'container',\r\n          character: 'character',\r\n          characterInactive: 'character--inactive',\r\n          characterSelected: 'character--selected',\r\n        }}\r\n        inputProps={{\r\n          name: 'authenticationCode',\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n", "import { Form, useActionData, useTransition } from '@remix-run/react';\r\nimport { Button } from '../shared';\r\nimport { VerificationInput } from './verification-input';\r\n\r\nexport const SMSForm = () => {\r\n  const actionData = useActionData();\r\n  const transition = useTransition();\r\n\r\n  return (\r\n    <Form method=\"post\">\r\n      SMS Verification code\r\n      <div className=\"mt-5 mb-10\">\r\n        <VerificationInput />\r\n      </div>\r\n      <input\r\n        type=\"hidden\"\r\n        name=\"authenticationChallengeId\"\r\n        value={actionData?.smsChallengeId}\r\n      />\r\n      <input type=\"hidden\" name=\"userId\" value={actionData?.userId} />\r\n      <Button\r\n        isLoading={\r\n          transition.state === 'submitting' &&\r\n          transition.submission.formData.get('_action') === 'verify'\r\n        }\r\n        name=\"_action\"\r\n        value=\"verify\"\r\n        type=\"submit\"\r\n      >\r\n        Verify\r\n      </Button>\r\n    </Form>\r\n  );\r\n};\r\n", "import { Form, useActionData, useTransition } from '@remix-run/react';\r\nimport { Button } from '../shared';\r\nimport { VerificationInput } from './verification-input';\r\n\r\nexport const TOTPForm = () => {\r\n  const actionData = useActionData();\r\n  const transition = useTransition();\r\n\r\n  return (\r\n    <Form method=\"post\">\r\n      <h3 className=\"text-xl mb-3 \">Authenticator app</h3>\r\n      <p>Use the code that is generated by your authenticator app</p>{' '}\r\n      <div className=\"mt-5 mb-10\">\r\n        <VerificationInput />\r\n      </div>\r\n      <input\r\n        type=\"hidden\"\r\n        name=\"authenticationChallengeId\"\r\n        value={actionData?.totpChallengeId}\r\n      />\r\n      <input type=\"hidden\" name=\"userId\" value={actionData?.userId} />\r\n      {actionData?.errors?.authCode && (\r\n        <div className=\"pt-1 my-4 text-red-700\" id=\"password-error\">\r\n          {actionData.errors.authCode}\r\n        </div>\r\n      )}\r\n      <Button\r\n        isLoading={\r\n          transition.state === 'submitting' &&\r\n          transition.submission.formData.get('_action') === 'verify'\r\n        }\r\n        name=\"_action\"\r\n        value=\"verify\"\r\n        type=\"submit\"\r\n      >\r\n        Verify\r\n      </Button>\r\n    </Form>\r\n  );\r\n};\r\n", "// TODO: forgot-password route\r\n// send an email for the user, create a resource route that allow them to log in\r\nexport default function ForgotPassword() {\r\n  return (\r\n    <div>\r\n      <div>ForgotPassword</div>\r\n    </div>\r\n  );\r\n}\r\n", "import type { ActionFunction, LoaderFunction } from '@remix-run/node';\r\nimport { json, redirect } from '@remix-run/node';\r\nimport { DeleteAccount, ChangePassword } from '~/components/settings';\r\nimport { Factors } from '~/components/settings/mfa/factors';\r\nimport {\r\n  deleteUser,\r\n  disable2FA,\r\n  getUserAuthFactors,\r\n  updatePassword,\r\n} from '~/prisma-actions/user.server';\r\nimport {\r\n  cookieSessionStorage,\r\n  displayToast,\r\n  getSession,\r\n  requireUser,\r\n  requireUserId,\r\n} from '~/utils/session.server';\r\n\r\nexport const loader: LoaderFunction = async ({ request }) => {\r\n  const userId = await requireUserId(request);\r\n  const userAuthFactors = await getUserAuthFactors(userId);\r\n\r\n  return userAuthFactors;\r\n};\r\n\r\nconst badRequest = (data) => json(data, { status: 400 });\r\n\r\nexport const action: ActionFunction = async ({ request }) => {\r\n  const { session } = await getSession(request);\r\n  const user = await requireUser(request);\r\n  let formData = await request.formData();\r\n  let { _action } = Object.fromEntries(formData);\r\n\r\n  switch (_action) {\r\n    case 'updatePassword':\r\n      let currentPassword = formData.get('currentPassword');\r\n      let newPassword = formData.get('newPassword');\r\n\r\n      if (\r\n        typeof currentPassword !== 'string' ||\r\n        typeof newPassword !== 'string'\r\n      ) {\r\n        return badRequest({ formError: `Form not submitted correctly.` });\r\n      }\r\n\r\n      if (!currentPassword || !newPassword) {\r\n        return json(\r\n          { errors: { message: 'This field is required' } },\r\n          { status: 400 },\r\n        );\r\n      }\r\n      const res = await updatePassword(user.id, currentPassword, newPassword);\r\n\r\n      if (res) {\r\n        displayToast(\r\n          session,\r\n          'Your password has been updated successfully',\r\n          'success',\r\n        );\r\n\r\n        return redirect('/settings', {\r\n          headers: {\r\n            'Set-Cookie': await cookieSessionStorage.commitSession(session),\r\n          },\r\n        });\r\n      }\r\n      return res;\r\n\r\n    case 'toggle2FA':\r\n      if (!user.totpFactorId && !user.smsFactorId) {\r\n        return redirect('/settings/two-factor-authentication');\r\n      }\r\n      return await disable2FA(user.id);\r\n\r\n    case 'deleteAccount':\r\n      await deleteUser(user.id);\r\n      return redirect('/signup');\r\n  }\r\n};\r\n\r\nexport default function Settings() {\r\n  return (\r\n    <section className=\"my-10\">\r\n      <h1 className=\"text-3xl\">Settings</h1>\r\n      <div className=\"space-y-10 mt-5\">\r\n        <ChangePassword />\r\n        <Factors />\r\n        <DeleteAccount />\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n", "import { Form, useTransition } from '@remix-run/react';\r\nimport { useEffect, useRef } from 'react';\r\nimport { Button } from '../shared';\r\nimport { TextInput } from '../shared/text-input';\r\n\r\nexport const ChangePassword = () => {\r\n  const transition = useTransition();\r\n  let formRef = useRef<HTMLFormElement>(null);\r\n\r\n  const isUpdatingPassword =\r\n    transition.state === 'submitting' &&\r\n    transition.submission.formData.get('_action') === 'updatePassword';\r\n\r\n  useEffect(() => {\r\n    if (!isUpdatingPassword) {\r\n      formRef.current?.reset();\r\n    }\r\n  }, [isUpdatingPassword]);\r\n\r\n  return (\r\n    <div>\r\n      <h3 className=\"text-xl leading-6 text-gray-900 mb-3\">Change password</h3>\r\n      <Form ref={formRef} method=\"post\" className=\"space-y-4 max-w-xs\">\r\n        <fieldset>\r\n          <label\r\n            htmlFor=\"currentPassword\"\r\n            className=\"block mb-1 text-sm text-gray-700\"\r\n          >\r\n            Current Password\r\n          </label>\r\n          <TextInput\r\n            id=\"currentPassword\"\r\n            type=\"password\"\r\n            name=\"currentPassword\"\r\n          />\r\n        </fieldset>\r\n        <fieldset>\r\n          <label\r\n            htmlFor=\"newPassword\"\r\n            className=\"text-sm mb-1 block text-gray-700\"\r\n          >\r\n            New Password\r\n          </label>\r\n          <TextInput id=\"newPassword\" type=\"password\" name=\"newPassword\" />\r\n        </fieldset>\r\n        <Button\r\n          isLoading={isUpdatingPassword}\r\n          name=\"_action\"\r\n          value=\"updatePassword\"\r\n          type=\"submit\"\r\n        >\r\n          Update password\r\n        </Button>\r\n      </Form>\r\n    </div>\r\n  );\r\n};\r\n", "import { Button } from '../shared';\r\nimport * as AlertDialogPrimitive from '@radix-ui/react-alert-dialog';\r\nimport classnames from 'classnames';\r\nimport { Form } from '@remix-run/react';\r\n\r\nexport const DeleteAccount = () => {\r\n  return (\r\n    <div>\r\n      <h3 className=\"text-xl leading-6 text-gray-900 \">Danger Zone</h3>\r\n      <div className=\"flex w-full flex-col space-y-4 md:flex-row justify-between my-4 md:items-center\">\r\n        <div>\r\n          <h4 className=\"mb-1\">Delete your account</h4>\r\n          <p className=\"text-sm max-w-sm text-gray-600\">\r\n            Once you delete your account, there is no going back. All of your\r\n            data will be lost. Please be certain.\r\n          </p>\r\n        </div>\r\n        <Form method=\"post\">\r\n          <AlertDialogPrimitive.Root>\r\n            <AlertDialogPrimitive.Trigger asChild>\r\n              <Button\r\n                className=\"flex-shrink-0 max-w-[9rem]\"\r\n                size=\"large\"\r\n                appearance=\"danger\"\r\n              >\r\n                Delete account\r\n              </Button>\r\n            </AlertDialogPrimitive.Trigger>\r\n\r\n            <AlertDialogPrimitive.Overlay className=\"fixed inset-0 z-20 bg-black/50\" />\r\n            <AlertDialogPrimitive.Content\r\n              className={classnames(\r\n                'fixed z-50',\r\n                'w-[95vw] max-w-md rounded-lg p-4 md:w-full',\r\n                'top-[50%] left-[50%] -translate-x-[50%] -translate-y-[50%]',\r\n                'bg-white',\r\n                'focus:outline-none focus-visible:ring focus-visible:ring-indigo-500 focus-visible:ring-opacity-75'\r\n              )}\r\n            >\r\n              <AlertDialogPrimitive.Title className=\"text-sm font-medium text-gray-900 \">\r\n                Are you absolutely sure?\r\n              </AlertDialogPrimitive.Title>\r\n              <AlertDialogPrimitive.Description className=\"mt-2 text-sm font-normal text-gray-700\">\r\n                This action cannot be undone. This will permanently delete your\r\n                account and remove your data from our servers.\r\n              </AlertDialogPrimitive.Description>\r\n              <div className=\"mt-4 flex justify-end space-x-2\">\r\n                <AlertDialogPrimitive.Cancel asChild>\r\n                  <Button appearance=\"muted\">Cancel</Button>\r\n                </AlertDialogPrimitive.Cancel>\r\n                <Button\r\n                  type=\"submit\"\r\n                  name=\"_action\"\r\n                  value=\"deleteAccount\"\r\n                  appearance=\"danger\"\r\n                >\r\n                  Confirm\r\n                </Button>\r\n              </div>\r\n            </AlertDialogPrimitive.Content>\r\n          </AlertDialogPrimitive.Root>\r\n        </Form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n", "import { Form, useLoaderData, useTransition } from '@remix-run/react';\r\nimport { Button } from '~/components/shared/button';\r\n\r\nexport const Factors = () => {\r\n  const data = useLoaderData();\r\n  const transition = useTransition();\r\n\r\n  return (\r\n    <div>\r\n      <div>\r\n        <div className=\"flex items-center justify-between mb-1\">\r\n          <h3 className=\"text-xl leading-6 text-gray-900 \">\r\n            Two-factor authentication\r\n          </h3>\r\n          <Form method=\"post\">\r\n            <Button\r\n              isLoading={\r\n                transition.state === 'submitting' &&\r\n                transition.submission.formData.get('_action') === 'toggle2FA'\r\n              }\r\n              size=\"small\"\r\n              name=\"_action\"\r\n              value=\"toggle2FA\"\r\n            >\r\n              {data?.totpFactorId || data?.smsFactorId ? 'Disable' : 'Enable'}\r\n            </Button>\r\n          </Form>\r\n        </div>\r\n        <p className=\"mb-3 text-sm max-w-md text-gray-600\">\r\n          Two-factor authentication (2FA) is an extra layer of security used\r\n          when logging into websites or apps.\r\n        </p>\r\n        <div className=\"bg-white shadow overflow-hidden sm:rounded-md\">\r\n          <div className=\"px-4 py-5 sm:px-6\">\r\n            <p className=\"mt-1 max-w-2xl text-sm text-gray-500\">\r\n              Two-factor methods\r\n            </p>\r\n          </div>\r\n          <div className=\"border-t border-gray-200 px-4 py-5 sm:p-0\">\r\n            <dl className=\"sm:divide-y sm:divide-gray-200\">\r\n              <div className=\"items-center py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6\">\r\n                <dt className=\"text-sm  text-gray-500\">Authenticator app</dt>\r\n                <dd className=\"mt-1 text-right text-sm text-gray-900 sm:mt-0 sm:col-span-2\">\r\n                  <Form\r\n                    method=\"get\"\r\n                    action=\"/settings/two-factor-authentication\"\r\n                  >\r\n                    <span className=\"mr-5 text-gray-500\">\r\n                      {data?.totpFactorId ? 'Configured' : 'Not configured'}\r\n                    </span>\r\n                    <Button type=\"submit\">\r\n                      {data?.totpFactorId ? 'Edit' : 'Add'}\r\n                    </Button>\r\n                  </Form>\r\n                </dd>\r\n              </div>\r\n              <div className=\"py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6\">\r\n                <dt className=\"text-sm   text-gray-500\">SMS</dt>\r\n                <dd className=\"mt-1 text-right text-sm text-gray-900 sm:mt-0 sm:col-span-2\">\r\n                  <Form\r\n                    method=\"get\"\r\n                    action=\"/settings/two-factor-authentication\"\r\n                  >\r\n                    <span className=\"mr-5 text-gray-500\">\r\n                      {data?.smsFactorId ? 'Configured' : 'Not configured'}\r\n                    </span>\r\n                    <Button type=\"submit\">\r\n                      {data?.smsFactorId ? 'Edit' : 'Add'}\r\n                    </Button>\r\n                  </Form>\r\n                </dd>\r\n              </div>\r\n            </dl>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n", "import type { ActionFunction, LoaderFunction } from '@remix-run/node';\r\nimport { redirect } from '@remix-run/node';\r\nimport { logout } from '~/utils/session.server';\r\n\r\nexport const action: ActionFunction = async ({ request }) => {\r\n  return logout(request);\r\n};\r\n\r\nexport const loader: LoaderFunction = async () => {\r\n  return redirect('/');\r\n};\r\n", "import type {\r\n  ActionFunction,\r\n  LoaderFunction,\r\n  MetaFunction,\r\n} from '@remix-run/node';\r\nimport { json, redirect } from '@remix-run/node';\r\nimport { Form, Link, useActionData, useSearchParams } from '@remix-run/react';\r\nimport { getUserId } from '~/auth/getUserId';\r\nimport { createUserSession } from '~/auth/createUserSession';\r\nimport { createUser, getUserByEmail } from '~/prisma-actions/user.server';\r\nimport { validateEmail } from '~/utils/validateEmail';\r\nimport { redirectSafely } from '~/utils/redirectSafely';\r\n\r\nexport const loader: LoaderFunction = async ({ request }) => {\r\n  const userId = await getUserId(request);\r\n  if (userId) return redirect('/');\r\n  return json({});\r\n};\r\n\r\ninterface ActionData {\r\n  errors: {\r\n    email?: string;\r\n    password?: string;\r\n  };\r\n}\r\n\r\nexport const action: ActionFunction = async ({ request }) => {\r\n  const formData = await request.formData();\r\n  const email = formData.get('email') as string;\r\n  const password = formData.get('password') as string;\r\n  const redirectTo = redirectSafely(formData.get('redirectTo'), '/');\r\n\r\n  if (!validateEmail(email!)) {\r\n    return json<ActionData>(\r\n      { errors: { email: 'Email is invalid' } },\r\n      { status: 400 },\r\n    );\r\n  }\r\n\r\n  if (typeof password !== 'string') {\r\n    return json<ActionData>(\r\n      { errors: { password: 'Password is required' } },\r\n      { status: 400 },\r\n    );\r\n  }\r\n\r\n  if (password.length < 8) {\r\n    return json<ActionData>(\r\n      { errors: { password: 'Password is too short' } },\r\n      { status: 400 },\r\n    );\r\n  }\r\n\r\n  const existingUser = await getUserByEmail(email);\r\n  if (existingUser) {\r\n    return json<ActionData>(\r\n      { errors: { email: 'A user already exists with this email' } },\r\n      { status: 400 },\r\n    );\r\n  }\r\n\r\n  const user = await createUser(email, password);\r\n\r\n  return createUserSession({\r\n    request,\r\n    userId: user.id,\r\n    remember: false,\r\n    redirectTo,\r\n  });\r\n};\r\n\r\nexport const meta: MetaFunction = () => {\r\n  return {\r\n    title: 'Sign Up',\r\n  };\r\n};\r\n\r\nexport default function Join() {\r\n  const [searchParams] = useSearchParams();\r\n  const redirectTo = searchParams.get('redirectTo') ?? undefined;\r\n  const actionData = useActionData() as ActionData;\r\n\r\n  return (\r\n    <div className=\"flex min-h-full flex-col justify-center\">\r\n      <div className=\"mx-auto w-full max-w-md px-8  my-20\">\r\n        <h1 className=\"text-4xl text-center text-gray-800  mb-10\">Sign up</h1>\r\n        <Form method=\"post\" className=\"space-y-6\">\r\n          <div>\r\n            <label htmlFor=\"email\" className=\"block text-sm  text-gray-700\">\r\n              Email address\r\n            </label>\r\n            <div className=\"mt-1\">\r\n              <input\r\n                id=\"email\"\r\n                required\r\n                autoFocus={true}\r\n                name=\"email\"\r\n                type=\"email\"\r\n                autoComplete=\"email\"\r\n                aria-invalid={actionData?.errors?.email ? true : undefined}\r\n                aria-describedby=\"email-error\"\r\n                className=\"w-full rounded border border-gray-500 px-2 py-1 text-lg\"\r\n              />\r\n              {actionData?.errors?.email && (\r\n                <div className=\"pt-1 text-red-700\" id=\"email-error\">\r\n                  {actionData.errors.email}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            <label htmlFor=\"password\" className=\"block text-sm  text-gray-700\">\r\n              Password\r\n            </label>\r\n            <div className=\"mt-1\">\r\n              <input\r\n                id=\"password\"\r\n                name=\"password\"\r\n                type=\"password\"\r\n                autoComplete=\"new-password\"\r\n                aria-invalid={actionData?.errors?.password ? true : undefined}\r\n                aria-describedby=\"password-error\"\r\n                className=\"w-full rounded border border-gray-500 px-2 py-1 text-lg\"\r\n              />\r\n              {actionData?.errors?.password && (\r\n                <div className=\"pt-1 text-red-700\" id=\"password-error\">\r\n                  {actionData.errors.password}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          <input type=\"hidden\" name=\"redirectTo\" value={redirectTo} />\r\n          <button\r\n            type=\"submit\"\r\n            className=\"w-full rounded bg-indigo-500  py-2 px-4 text-white hover:bg-indigo-600 focus:bg-indigo-400\"\r\n          >\r\n            Create Account\r\n          </button>\r\n          <div className=\"flex items-center justify-center\">\r\n            <div className=\"text-center text-sm text-gray-500\">\r\n              Already have an account?{' '}\r\n              <Link\r\n                className=\"text-indigo-500 underline\"\r\n                to={{\r\n                  pathname: '/login',\r\n                  search: searchParams.toString(),\r\n                }}\r\n              >\r\n                Log in\r\n              </Link>\r\n            </div>\r\n          </div>\r\n        </Form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n", "import { redirect } from '@remix-run/node';\nimport { USER_SESSION_KEY } from './constants';\nimport { cookieSessionStorage } from './cookiesSessionStorage';\nimport { getSession } from './getSession';\n\nexport async function createUserSession({\n  request,\n  userId,\n  remember,\n  redirectTo,\n}: {\n  request: Request;\n  userId: string;\n  remember: boolean;\n  redirectTo: string;\n}) {\n  const { session } = await getSession(request);\n  session.set(USER_SESSION_KEY, userId);\n\n  return redirect(redirectTo, {\n    headers: {\n      'Set-Cookie': await cookieSessionStorage.commitSession(session, {\n        maxAge: remember\n          ? 60 * 60 * 24 * 7 // 7 days\n          : undefined,\n      }),\n    },\n  });\n}\n", "export const validateEmail = (email: string) => {\n  return typeof email === 'string' && email.length > 3 && email.includes('@');\n};\n", "const DEFAULT_REDIRECT = '/';\n\n/**\n * This should be used any time the redirect path is user-provided\n * (Like the query string on our login/signup pages). This avoids\n * open-redirect vulnerabilities.\n * @param {string} to The redirect destination\n * @param {string} defaultRedirect The redirect to use if the to is unsafe.\n */\nexport function redirectSafely(\n  to: FormDataEntryValue | string | null | undefined,\n  defaultRedirect: string = DEFAULT_REDIRECT,\n) {\n  if (!to || typeof to !== 'string') {\n    return defaultRedirect;\n  }\n\n  if (!to.startsWith('/') || to.startsWith('//')) {\n    return defaultRedirect;\n  }\n\n  return to;\n}\n", "import { Link } from '@remix-run/react';\r\nimport { useOptionalUser } from '~/hooks/useOptionalUser';\r\n\r\nexport default function Index() {\r\n  const user = useOptionalUser();\r\n  return (\r\n    <main className=\"relative min-h-screen bg-white \">\r\n      {user ? (\r\n        <Link\r\n          to=\"/settings\"\r\n          className=\"max-w-sm mx-auto mt-40 flex items-center justify-center rounded-md border border-transparent bg-white px-4 py-3 text-base  text-indigo-700 shadow-md hover:bg-indigo-50 sm:px-8\"\r\n        >\r\n          Settings\r\n        </Link>\r\n      ) : (\r\n        <div>\r\n          <p className=\"text-xl text-center mt-40\">\r\n            Remix app that has user auth + 2FA.\r\n          </p>\r\n          <div className=\"mx-auto mt-10 max-w-sm sm:flex sm:max-w-none\">\r\n            {user ? (\r\n              <Link\r\n                to=\"/settings\"\r\n                className=\"flex items-center justify-center rounded-md border border-transparent bg-white px-4 py-3 text-base  text-indigo-700 shadow-md hover:bg-indigo-50 sm:px-8\"\r\n              >\r\n                Settings\r\n              </Link>\r\n            ) : (\r\n              <div className=\"space-y-4 sm:mx-auto sm:inline-grid sm:grid-cols-2 sm:gap-5 sm:space-y-0\">\r\n                <Link\r\n                  to=\"/signup\"\r\n                  className=\"flex items-center justify-center rounded-md border border-transparent bg-white px-4 py-3 text-base  text-indigo-700 shadow-md hover:bg-indigo-50 sm:px-8\"\r\n                >\r\n                  Sign up\r\n                </Link>\r\n                <Link\r\n                  to=\"/login\"\r\n                  className=\"flex items-center justify-center rounded-md bg-indigo-500 px-4 py-3  text-white hover:bg-indigo-600  \"\r\n                >\r\n                  Log In\r\n                </Link>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </main>\r\n  );\r\n}\r\n", "import type {\r\n  ActionFunction,\r\n  LoaderFunction,\r\n  MetaFunction,\r\n} from '@remix-run/node';\r\nimport { json, redirect } from '@remix-run/node';\r\nimport { useActionData } from '@remix-run/react';\r\nimport { getUserId } from '~/auth/getUserId';\r\nimport { createUserSession } from '~/auth/createUserSession';\r\nimport { verifyLogin } from '~/prisma-actions/user.server';\r\nimport { redirectSafely } from '~/utils/redirectSafely';\r\nimport { validateEmail } from '~/utils/validateEmail';\r\nimport { workos } from '~/utils/workos.server';\r\nimport { LoginForm } from '~/components/login-form';\r\nimport { SMSForm, TOTPForm, FormSwitcher } from '~/components/mfa';\r\n\r\nexport const loader: LoaderFunction = async ({ request }) => {\r\n  const userId = await getUserId(request);\r\n  if (userId) return redirect('/');\r\n  return null;\r\n};\r\n\r\ninterface ActionData {\r\n  errors?: {\r\n    email?: string;\r\n    password?: string;\r\n  };\r\n}\r\n\r\nexport const action: ActionFunction = async ({ request }) => {\r\n  const formData = await request.formData();\r\n  const redirectTo = redirectSafely(formData.get('redirectTo'), '/');\r\n  const remember = formData.get('remember');\r\n  const { _action, ...values } = Object.fromEntries(formData);\r\n\r\n  switch (_action) {\r\n    case 'login':\r\n      const email = formData.get('email') as string;\r\n      const password = formData.get('password') as string;\r\n\r\n      if (!validateEmail(email!)) {\r\n        return json<ActionData>(\r\n          { errors: { email: 'Email is invalid' } },\r\n          { status: 400 },\r\n        );\r\n      }\r\n\r\n      if (typeof password !== 'string') {\r\n        return json<ActionData>(\r\n          { errors: { password: 'Password is required' } },\r\n          { status: 400 },\r\n        );\r\n      }\r\n\r\n      if (password.length < 8) {\r\n        return json<ActionData>(\r\n          { errors: { password: 'Password is too short' } },\r\n          { status: 400 },\r\n        );\r\n      }\r\n\r\n      const user = await verifyLogin(email, password);\r\n\r\n      if (!user) {\r\n        return json<ActionData>(\r\n          { errors: { email: 'Invalid email or password' } },\r\n          { status: 400 },\r\n        );\r\n      }\r\n\r\n      const hasMfaEnabled = user.totpFactorId || user.smsFactorId;\r\n\r\n      if (!hasMfaEnabled) {\r\n        return createUserSession({\r\n          request,\r\n          userId: user.id,\r\n          remember: remember === 'on',\r\n          redirectTo,\r\n        });\r\n      }\r\n\r\n      const hasTotpEnabled = user.totpFactorId && !user.smsFactorId;\r\n\r\n      if (hasTotpEnabled) {\r\n        const totpChallenge = await workos.mfa.challengeFactor({\r\n          authenticationFactorId: `${user.totpFactorId}`,\r\n        });\r\n\r\n        return {\r\n          userId: user.id,\r\n          totpChallengeId: user.totpFactorId && totpChallenge.id,\r\n          totpFactorId: user.totpFactorId,\r\n        };\r\n      }\r\n\r\n      const hasSmsEnabled = user.smsFactorId && !user.totpFactorId;\r\n\r\n      if (hasSmsEnabled) {\r\n        const smsChallenge = await workos.mfa.challengeFactor({\r\n          authenticationFactorId: `${user.smsFactorId}`,\r\n        });\r\n\r\n        return {\r\n          userId: user.id,\r\n          smsChallengeId: user.smsFactorId && smsChallenge.id,\r\n          smsFactorId: user.smsFactorId,\r\n        };\r\n      }\r\n\r\n      const hasAllFactorsEnabled = user.totpFactorId && user.smsFactorId;\r\n\r\n      if (hasAllFactorsEnabled) {\r\n        const totpChallenge = await workos.mfa.challengeFactor({\r\n          authenticationFactorId: `${user.totpFactorId}`,\r\n        });\r\n\r\n        return {\r\n          userId: user.id,\r\n          totpChallengeId: totpChallenge.id,\r\n          totpFactorId: user.totpFactorId,\r\n          smsFactorId: user.smsFactorId,\r\n        };\r\n      }\r\n\r\n    case 'SMS':\r\n      const { smsFactorId } = values;\r\n      const smsChallenge = await workos.mfa.challengeFactor({\r\n        authenticationFactorId: `${smsFactorId}`,\r\n      });\r\n\r\n      return {\r\n        smsChallengeId: smsChallenge.id,\r\n      };\r\n\r\n    case 'verify':\r\n      const { authenticationCode, authenticationChallengeId, userId } = values;\r\n\r\n      const response = await workos.mfa.verifyFactor({\r\n        authenticationChallengeId: `${authenticationChallengeId}`,\r\n        code: `${authenticationCode}`,\r\n      });\r\n\r\n      if (response.error) {\r\n        return json(\r\n          {\r\n            errors: {\r\n              authCode: `Something went wrong. Please try again`,\r\n            },\r\n          },\r\n          { status: 400 },\r\n        );\r\n      }\r\n\r\n      return createUserSession({\r\n        request,\r\n        userId: `${userId}`,\r\n        remember: remember === 'on' ? true : false,\r\n        redirectTo,\r\n      });\r\n  }\r\n};\r\n\r\nexport const meta: MetaFunction = () => {\r\n  return {\r\n    title: 'Login',\r\n  };\r\n};\r\n\r\nexport default function LoginPage() {\r\n  const actionData = useActionData();\r\n\r\n  const hasSmsEnabled = actionData?.smsFactorId;\r\n  const hasTotpEnabled = actionData?.totpFactorId;\r\n  const hasMfaEnabled = hasSmsEnabled || hasTotpEnabled;\r\n  const hasAllFactorsEnabled = hasTotpEnabled && hasSmsEnabled;\r\n\r\n  return (\r\n    <div className=\"flex min-h-full flex-col justify-center\">\r\n      <div className=\"mx-auto w-full max-w-md px-8 my-20\">\r\n        <h1 className=\"text-4xl text-center text-gray-800  mb-10\">Log in</h1>\r\n        {!hasMfaEnabled && <LoginForm />}\r\n        {hasAllFactorsEnabled ? (\r\n          <FormSwitcher />\r\n        ) : (\r\n          <>\r\n            {hasTotpEnabled && <TOTPForm />}\r\n            {hasSmsEnabled && <SMSForm />}\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n", "import { Form, Link, useActionData, useSearchParams } from '@remix-run/react';\r\nimport { Button } from './shared';\r\nimport { TextInput } from './shared/text-input';\r\n\r\nexport const LoginForm = () => {\r\n  const actionData = useActionData();\r\n  const [searchParams] = useSearchParams();\r\n  const redirectTo = searchParams.get('redirectTo') || '/';\r\n\r\n  return (\r\n    <Form method=\"post\" className=\"space-y-6\">\r\n      <div>\r\n        <label htmlFor=\"email\" className=\"block text-sm  text-gray-700\">\r\n          Email address\r\n        </label>\r\n        <div className=\"mt-1\">\r\n          <TextInput\r\n            id=\"email\"\r\n            required\r\n            autoFocus={true}\r\n            name=\"email\"\r\n            type=\"email\"\r\n            autoComplete=\"email\"\r\n            aria-invalid={actionData?.errors?.email ? true : undefined}\r\n            aria-describedby=\"email-error\"\r\n          />\r\n          {actionData?.errors?.email && (\r\n            <p className=\"pt-1 text-red-700\" id=\"email-error\">\r\n              {actionData.errors.email}\r\n            </p>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <div>\r\n        <label htmlFor=\"password\" className=\"block text-sm  text-gray-700\">\r\n          Password\r\n        </label>\r\n        <div className=\"mt-1\">\r\n          <TextInput\r\n            id=\"password\"\r\n            name=\"password\"\r\n            type=\"password\"\r\n            autoComplete=\"current-password\"\r\n            aria-invalid={actionData?.errors?.password ? true : undefined}\r\n            aria-describedby=\"password-error\"\r\n          />\r\n          {actionData?.errors?.password && (\r\n            <div className=\"pt-1 text-red-700\" id=\"password-error\">\r\n              {actionData.errors.password}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <input type=\"hidden\" name=\"redirectTo\" value={redirectTo} />\r\n      <Button name=\"_action\" value=\"login\" type=\"submit\">\r\n        Log in\r\n      </Button>\r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"flex items-center\">\r\n          <input\r\n            id=\"remember\"\r\n            name=\"remember\"\r\n            type=\"checkbox\"\r\n            className=\"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500\"\r\n          />\r\n          <label\r\n            htmlFor=\"remember\"\r\n            className=\"ml-2 block text-sm text-gray-900\"\r\n          >\r\n            Remember me\r\n          </label>\r\n        </div>\r\n        <div className=\"text-center text-sm text-gray-500\">\r\n          Don't have an account?{' '}\r\n          <Link\r\n            className=\"text-indigo-500 underline\"\r\n            to={{\r\n              pathname: '/signup',\r\n              search: searchParams.toString(),\r\n            }}\r\n          >\r\n            Sign up\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    </Form>\r\n  );\r\n};\r\n", "export default {'version':'914e864c','entry':{'module':'/build/entry.client-YCIPVFEF.js','imports':['/build/_shared/chunk-SXNYENQH.js','/build/_shared/chunk-3P3WQLY7.js','/build/_shared/chunk-6BO74FWO.js']},'routes':{'root':{'id':'root','parentId':undefined,'path':'','index':undefined,'caseSensitive':undefined,'module':'/build/root-XKCB5XXM.js','imports':['/build/_shared/chunk-ID7K5OUP.js','/build/_shared/chunk-3GZK3RUR.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/forgot-password':{'id':'routes/forgot-password','parentId':'root','path':'forgot-password','index':undefined,'caseSensitive':undefined,'module':'/build/routes/forgot-password-JTQXSY5S.js','imports':undefined,'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/index':{'id':'routes/index','parentId':'root','path':undefined,'index':true,'caseSensitive':undefined,'module':'/build/routes/index-VJTAB3EC.js','imports':undefined,'hasAction':false,'hasLoader':false,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/login':{'id':'routes/login','parentId':'root','path':'login','index':undefined,'caseSensitive':undefined,'module':'/build/routes/login-YFIXOUIS.js','imports':['/build/_shared/chunk-AIB7DECT.js','/build/_shared/chunk-LEUAUMWY.js','/build/_shared/chunk-ADJXMSVX.js','/build/_shared/chunk-QIYPYOI3.js'],'hasAction':true,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/logout':{'id':'routes/logout','parentId':'root','path':'logout','index':undefined,'caseSensitive':undefined,'module':'/build/routes/logout-QAON4MWG.js','imports':undefined,'hasAction':true,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/settings':{'id':'routes/settings','parentId':'root','path':'settings','index':undefined,'caseSensitive':undefined,'module':'/build/routes/settings-444OC5BW.js','imports':['/build/_shared/chunk-LEUAUMWY.js','/build/_shared/chunk-UJ6TCZCN.js','/build/_shared/chunk-ADJXMSVX.js','/build/_shared/chunk-QIYPYOI3.js'],'hasAction':true,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/settings.two-factor-authentication':{'id':'routes/settings.two-factor-authentication','parentId':'root','path':'settings/two-factor-authentication','index':undefined,'caseSensitive':undefined,'module':'/build/routes/settings.two-factor-authentication-LABIHDZQ.js','imports':['/build/_shared/chunk-AIB7DECT.js','/build/_shared/chunk-UJ6TCZCN.js','/build/_shared/chunk-ADJXMSVX.js','/build/_shared/chunk-QIYPYOI3.js'],'hasAction':true,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false},'routes/signup':{'id':'routes/signup','parentId':'root','path':'signup','index':undefined,'caseSensitive':undefined,'module':'/build/routes/signup-PYHOAVXA.js','imports':['/build/_shared/chunk-QIYPYOI3.js'],'hasAction':true,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false}},'url':'/build/manifest-914E864C.js'};", "\nimport * as entryServer from \"C:\\\\development\\\\Web Development\\\\mahmoud-workos-mfa\\\\app\\\\entry.server.tsx\";\nimport * as route0 from \"C:\\\\development\\\\Web Development\\\\mahmoud-workos-mfa\\\\app\\\\root.tsx\";\nimport * as route1 from \"C:\\\\development\\\\Web Development\\\\mahmoud-workos-mfa\\\\app\\\\routes\\\\settings.two-factor-authentication.tsx\";\nimport * as route2 from \"C:\\\\development\\\\Web Development\\\\mahmoud-workos-mfa\\\\app\\\\routes\\\\forgot-password.tsx\";\nimport * as route3 from \"C:\\\\development\\\\Web Development\\\\mahmoud-workos-mfa\\\\app\\\\routes\\\\settings.tsx\";\nimport * as route4 from \"C:\\\\development\\\\Web Development\\\\mahmoud-workos-mfa\\\\app\\\\routes\\\\logout.tsx\";\nimport * as route5 from \"C:\\\\development\\\\Web Development\\\\mahmoud-workos-mfa\\\\app\\\\routes\\\\signup.tsx\";\nimport * as route6 from \"C:\\\\development\\\\Web Development\\\\mahmoud-workos-mfa\\\\app\\\\routes\\\\index.tsx\";\nimport * as route7 from \"C:\\\\development\\\\Web Development\\\\mahmoud-workos-mfa\\\\app\\\\routes\\\\login.tsx\";\n  export { default as assets } from \"@remix-run/dev/assets-manifest\";\n  export const entry = { module: entryServer };\n  export const routes = {\n    \"root\": {\n      id: \"root\",\n      parentId: undefined,\n      path: \"\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route0\n    },\n  \"routes/settings.two-factor-authentication\": {\n      id: \"routes/settings.two-factor-authentication\",\n      parentId: \"root\",\n      path: \"settings/two-factor-authentication\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route1\n    },\n  \"routes/forgot-password\": {\n      id: \"routes/forgot-password\",\n      parentId: \"root\",\n      path: \"forgot-password\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route2\n    },\n  \"routes/settings\": {\n      id: \"routes/settings\",\n      parentId: \"root\",\n      path: \"settings\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route3\n    },\n  \"routes/logout\": {\n      id: \"routes/logout\",\n      parentId: \"root\",\n      path: \"logout\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route4\n    },\n  \"routes/signup\": {\n      id: \"routes/signup\",\n      parentId: \"root\",\n      path: \"signup\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route5\n    },\n  \"routes/index\": {\n      id: \"routes/index\",\n      parentId: \"root\",\n      path: undefined,\n      index: true,\n      caseSensitive: undefined,\n      module: route6\n    },\n  \"routes/login\": {\n      id: \"routes/login\",\n      parentId: \"root\",\n      path: \"login\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route7\n    }\n  };"],
  "mappings": "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",
  "names": []
}
